(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[0],{1123:function(t,U,N){"use strict";(function(t){var n=N(1124),o=N(1125),u=N(1126);function r(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,r){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,r);if("number"!=typeof t)return i(this,t,e,r);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}function i(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=l(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(e,r),i=(t=a(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(c.isBuffer(e)){var r=0|h(e.length);return 0===(t=a(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?a(t,0):l(t,e);if("Buffer"===e.type&&u(e.data))return l(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(s(e),t=a(t,e<0?0:0|h(e)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function l(t,e){var r=e.length<0?0:0|h(e.length);t=a(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function h(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function p(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return C(t).length;default:if(n)return B(t).length;e=(""+e).toLowerCase(),n=!0}}function g(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function y(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=c.from(e,n)),c.isBuffer(e))return 0===e.length?-1:v(t,e,r,n,i);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):v(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,r,n,i){var o,u=1,a=t.length,s=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a/=u=2,s/=2,r/=2}function f(t,e){return 1===u?t[e]:t.readUInt16BE(e*u)}if(i){var l=-1;for(o=r;o<a;o++)if(f(t,o)===f(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===s)return l*u}else-1!==l&&(o-=o-l),l=-1}else for(a<r+s&&(r=a-s),o=r;0<=o;o--){for(var c=!0,h=0;h<s;h++)if(f(t,o+h)!==f(e,h)){c=!1;break}if(c)return o}return-1}function m(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?i<(n=Number(n))&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<n&&(n=o/2);for(var u=0;u<n;++u){var a=parseInt(e.substr(2*u,2),16);if(isNaN(a))return u;t[r+u]=a}return u}function d(t,e,r,n){return I(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function _(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function O(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,u,a,s,f=t[i],l=null,c=239<f?4:223<f?3:191<f?2:1;if(i+c<=r)switch(c){case 1:f<128&&(l=f);break;case 2:128==(192&(o=t[i+1]))&&127<(s=(31&f)<<6|63&o)&&(l=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&2047<(s=(15&f)<<12|(63&o)<<6|63&u)&&(s<55296||57343<s)&&(l=s);break;case 4:o=t[i+1],u=t[i+2],a=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&a)&&65535<(s=(15&f)<<18|(63&o)<<12|(63&u)<<6|63&a)&&s<1114112&&(l=s)}null===l?(l=65533,c=1):65535<l&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=c}return function(t){var e=t.length;if(e<=b)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=b));return r}(n)}U.Buffer=c,U.SlowBuffer=function(t){+t!=t&&(t=0);return c.alloc(+t)},U.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),U.kMaxLength=r(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,r){return i(null,t,e,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,r){return function(t,e,r,n){return s(e),e<=0?a(t,e):void 0!==r?"string"==typeof n?a(t,e).fill(r,n):a(t,e).fill(r):a(t,e)}(null,t,e,r)},c.allocUnsafe=function(t){return f(null,t)},c.allocUnsafeSlow=function(t){return f(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!u(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var r;if(void 0===e)for(r=e=0;r<t.length;++r)e+=t[r].length;var n=c.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(!c.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?O(this,0,t):function(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return x(this,e,r);case"utf8":case"utf-8":return O(this,e,r);case"ascii":return E(this,e,r);case"latin1":case"binary":return w(this,e,r);case"base64":return _(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",e=U.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,r,n,i){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=e)return 0;if(i<=n)return-1;if(r<=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(r>>>=0)-(e>>>=0),a=Math.min(o,u),s=this.slice(n,i),f=t.slice(e,r),l=0;l<a;++l)if(s[l]!==f[l]){o=s[l],u=f[l];break}return o<u?-1:u<o?1:0},c.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},c.prototype.indexOf=function(t,e,r){return y(this,t,e,r,!0)},c.prototype.lastIndexOf=function(t,e,r){return y(this,t,e,r,!1)},c.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||i<r)&&(r=i),0<t.length&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var o,u,a,s,f,l,c,h,p,g=!1;;)switch(n){case"hex":return m(this,t,e,r);case"utf8":case"utf-8":return h=e,p=r,I(B(t,(c=this).length-h),c,h,p);case"ascii":return d(this,t,e,r);case"latin1":case"binary":return d(this,t,e,r);case"base64":return s=this,f=e,l=r,I(C(t),s,f,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u=e,a=r,I(function(t,e){for(var r,n,i,o=[],u=0;u<t.length&&!((e-=2)<0);++u)r=t.charCodeAt(u),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,(o=this).length-u),o,u,a);default:if(g)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),g=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function E(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function w(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function x(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||n<r)&&(r=n);for(var i="",o=e;o<r;++o)i+=M(t[o]);return i}function P(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function A(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(r<t+e)throw new RangeError("Trying to access beyond buffer length")}function k(t,e,r,n,i,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function S(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function T(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function j(t,e,r,n){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(t,e,r,n,i){return i||j(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function R(t,e,r,n,i){return i||j(t,0,r,8),o.write(t,e,r,n,52,8),r+8}c.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=c.prototype;else{var i=e-t;r=new c(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},c.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||A(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},c.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||A(t,e,this.length);for(var n=this[t+--e],i=1;0<e&&(i*=256);)n+=this[t+--e]*i;return n},c.prototype.readUInt8=function(t,e){return e||A(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||A(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||A(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||A(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||A(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||A(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*e)),n},c.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||A(t,e,this.length);for(var n=e,i=1,o=this[t+--n];0<n&&(i*=256);)o+=this[t+--n]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return e||A(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||A(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(t,e){e||A(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(t,e){return e||A(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||A(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||A(t,4,this.length),o.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||A(t,4,this.length),o.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||A(t,8,this.length),o.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||A(t,8,this.length),o.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||k(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},c.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||k(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+r},c.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):S(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):S(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):T(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):T(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);k(this,t,e,r,i-1,-i)}var o=0,u=1,a=0;for(this[e]=255&t;++o<r&&(u*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/u>>0)-a&255;return e+r},c.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);k(this,t,e,r,i-1,-i)}var o=r-1,u=1,a=0;for(this[e+o]=255&t;0<=--o&&(u*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/u>>0)-a&255;return e+r},c.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):S(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):S(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):T(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||k(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):T(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,r){return L(this,t,e,!0,r)},c.prototype.writeFloatBE=function(t,e,r){return L(this,t,e,!1,r)},c.prototype.writeDoubleLE=function(t,e,r){return R(this,t,e,!0,r)},c.prototype.writeDoubleBE=function(t,e,r){return R(this,t,e,!1,r)},c.prototype.copy=function(t,e,r,n){if(r=r||0,n||0===n||(n=this.length),e>=t.length&&(e=t.length),e=e||0,0<n&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;0<=i;--i)t[i+e]=this[i+r];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},c.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(t=t||0))for(o=e;o<r;++o)this[o]=t;else{var u=c.isBuffer(t)?t:B(new c(t,n).toString()),a=u.length;for(o=0;o<r-e;++o)this[o+e]=u[o%a]}return this};var e=/[^+\/0-9A-Za-z-_]/g;function M(t){return t<16?"0"+t.toString(16):t.toString(16)}function B(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if(55295<(r=t.charCodeAt(u))&&r<57344){if(!i){if(56319<r){-1<(e-=3)&&o.push(239,191,189);continue}if(u+1===n){-1<(e-=3)&&o.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(e-=3)&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function C(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(e,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function I(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,N(1))},1124:function(t,e,r){"use strict";e.byteLength=function(t){var e=c(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){for(var e,r=c(t),n=r[0],i=r[1],o=new l(function(t,e,r){return 3*(e+r)/4-r}(0,n,i)),u=0,a=0<i?n-4:n,s=0;s<a;s+=4)e=f[t.charCodeAt(s)]<<18|f[t.charCodeAt(s+1)]<<12|f[t.charCodeAt(s+2)]<<6|f[t.charCodeAt(s+3)],o[u++]=e>>16&255,o[u++]=e>>8&255,o[u++]=255&e;2===i&&(e=f[t.charCodeAt(s)]<<2|f[t.charCodeAt(s+1)]>>4,o[u++]=255&e);1===i&&(e=f[t.charCodeAt(s)]<<10|f[t.charCodeAt(s+1)]<<4|f[t.charCodeAt(s+2)]>>2,o[u++]=e>>8&255,o[u++]=255&e);return o},e.fromByteArray=function(t){for(var e,r=t.length,n=r%3,i=[],o=0,u=r-n;o<u;o+=16383)i.push(s(t,o,u<o+16383?u:o+16383));1==n?(e=t[r-1],i.push(a[e>>2]+a[e<<4&63]+"==")):2==n&&(e=(t[r-2]<<8)+t[r-1],i.push(a[e>>10]+a[e>>4&63]+a[e<<2&63]+"="));return i.join("")};for(var a=[],f=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=n.length;i<o;++i)a[i]=n[i],f[n.charCodeAt(i)]=i;function c(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function s(t,e,r){for(var n,i,o=[],u=e;u<r;u+=3)n=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),o.push(a[(i=n)>>18&63]+a[i>>12&63]+a[i>>6&63]+a[63&i]);return o.join("")}f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},1125:function(t,e){e.read=function(t,e,r,n,i){var o,u,a=8*i-n-1,s=(1<<a)-1,f=s>>1,l=-7,c=r?i-1:0,h=r?-1:1,p=t[e+c];for(c+=h,o=p&(1<<-l)-1,p>>=-l,l+=a;0<l;o=256*o+t[e+c],c+=h,l-=8);for(u=o&(1<<-l)-1,o>>=-l,l+=n;0<l;u=256*u+t[e+c],c+=h,l-=8);if(0===o)o=1-f;else{if(o===s)return u?NaN:1/0*(p?-1:1);u+=Math.pow(2,n),o-=f}return(p?-1:1)*u*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var u,a,s,f=8*o-i-1,l=(1<<f)-1,c=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,g=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,u=l):(u=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-u))<1&&(u--,s*=2),2<=(e+=1<=u+c?h/s:h*Math.pow(2,1-c))*s&&(u++,s/=2),l<=u+c?(a=0,u=l):1<=u+c?(a=(e*s-1)*Math.pow(2,i),u+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),u=0));8<=i;t[r+p]=255&a,p+=g,a/=256,i-=8);for(u=u<<i|a,f+=i;0<f;t[r+p]=255&u,p+=g,u/=256,f-=8);t[r+p-g]|=128*y}},1126:function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},277:function(t,e,r){"use strict";t.exports={getFingerprint:function(e){return new Promise(function(o,u){var t=document.createElement("div");t.innerHTML='<iframe\n    src="'+e+'"\n    sandbox="allow-scripts allow-same-origin"\n    style="display: none;">\n  </iframe>';var a=t.firstChild;document.body.appendChild(a);window.addEventListener("message",function t(e){var r=e.data,n=r.type,i=r.fingerprint;switch(n){case"b2w-bazaarvoice-fingerprint:success":window.removeEventListener("message",t,!1),document.body.removeChild(a),o(i);break;case"b2w-bazaarvoice-fingerprint:failure":window.removeEventListener("message",t,!1),document.body.removeChild(a),u(new Error("b2w-bazaarvoice-fingerprint:failure"))}},!1)})}}},589:function(e,t,r){(function(O){var t;t=function(){return i={},r.m=n=[function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=l(r(1)),i=l(r(9)),o=l(r(3)),u=l(r(11)),a=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}}(r(12)),s=l(r(2)),f=l(r(13));function l(t){return t&&t.__esModule?t:{default:t}}e.default={Namespace:a,Assignment:s.default,Interpreter:i.default,Experiment:n.default,ExperimentSetup:f.default,Ops:{Random:o.default,Core:u.default}},t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t};function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o,u=r(2),a=(o=u)&&o.__esModule?o:{default:o},s=r(5);var f=(n(l,[{key:"getDefaultExperimentName",value:function(){if((0,s.isObject)(this)&&this.constructor&&this!==this.window){var t=this.constructor.toString().match(/function\s*(\w+)/);if(t&&2===t.length)return t[1]}return"GenericExperiment"}},{key:"getDefaultParamNames",value:function(){var t=this.assign.toString().split(".set(");return t.splice(0,1),(0,s.map)(t,function(t){var e=(0,s.trimTrailingWhitespace)(t.split(",")[0]);return e.substr(1,e.length-2)})}},{key:"requireAssignment",value:function(){this._assigned||this._assign()}},{key:"requireExposureLogging",value:function(t){this.shouldLogExposure(t)&&this.logExposure()}},{key:"_assign",value:function(){this.configureLogger();var t=this.assign(this._assignment,this.inputs);this._inExperiment=!(!t&&void 0!==t),this._assigned=!0}},{key:"setup",value:function(){}},{key:"inExperiment",value:function(){return this._inExperiment}},{key:"addOverride",value:function(t,e){this._assignment.addOverride(t,e)}},{key:"setOverrides",value:function(t){this._assignment.setOverrides(t);var e=this._assignment.getOverrides(),r=this;(0,s.forEach)(Object.keys(e),function(t){void 0!==r.inputs[t]&&(r.inputs[t]=e[t])})}},{key:"getSalt",value:function(){return this._salt?this._salt:this.name}},{key:"setSalt",value:function(t){this._salt=t,this._assignment&&(this._assignment.experimentSalt=t)}},{key:"getName",value:function(){return this.name}},{key:"assign",value:function(t,e){throw"IMPLEMENT assign"}},{key:"getParamNames",value:function(){throw"IMPLEMENT getParamNames"}},{key:"shouldFetchExperimentParameter",value:function(t){return 0<=this.getParamNames().indexOf(t)}},{key:"setName",value:function(t){this.name=t.replace(/\s+/g,"-"),this._assignment&&(this._assignment.experimentSalt=this.getSalt())}},{key:"__asBlob",value:function(t){var e=arguments.length<=0||void 0===t?{}:t,r={name:this.getName(),time:(new Date).getTime()/1e3,salt:this.getSalt(),inputs:this.inputs,params:this._assignment.getParams()};return(0,s.extend)(r,e),r}},{key:"setAutoExposureLogging",value:function(t){this._autoExposureLog=t}},{key:"getParams",value:function(){return this.requireAssignment(),this.requireExposureLogging(),this._assignment.getParams()}},{key:"get",value:function(t,e){return this.requireAssignment(),this.requireExposureLogging(t),this._assignment.get(t,e)}},{key:"toString",value:function(){return this.requireAssignment(),this.requireExposureLogging(),JSON.stringify(this.__asBlob())}},{key:"logExposure",value:function(t){this.inExperiment()&&(this._exposureLogged=!0,this.logEvent("exposure",t))}},{key:"shouldLogExposure",value:function(t){return!(void 0!==t&&!this.shouldFetchExperimentParameter(t))&&this._autoExposureLog&&!this.previouslyLogged()}},{key:"logEvent",value:function(t,e){var r;this.inExperiment()&&(r=e?{event:t,extra_data:(0,s.shallowCopy)(e)}:{event:t},this.log(this.__asBlob(r)))}},{key:"configureLogger",value:function(){throw"IMPLEMENT configureLogger"}},{key:"log",value:function(t){throw"IMPLEMENT log"}},{key:"previouslyLogged",value:function(){throw"IMPLEMENT previouslyLogged"}}]),l);function l(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),this.inputs=t,this._exposureLogged=!1,this._salt=null,this._inExperiment=!0,this.name=this.getDefaultExperimentName(),this._autoExposureLog=!0,this.setup(),this._assignment=new a.default(this.getSalt()),this._assigned=!1}e.default=f,t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t};function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=r(3),u=r(5);var a=(n(s,[{key:"evaluate",value:function(t){return t}},{key:"getOverrides",value:function(){return this._overrides}},{key:"addOverride",value:function(t,e){this._overrides[t]=e,this._data[t]=e}},{key:"setOverrides",value:function(t){this._overrides=(0,u.shallowCopy)(t);var e=this;(0,u.forEach)(Object.keys(this._overrides),function(t){e._data[t]=e._overrides[t]})}},{key:"set",value:function(t,e){"_data"!==t?"_overrides"!==t?"experimentSalt"!==t?"saltSeparator"!==t?(0,u.hasKey)(this._overrides,t)||(e instanceof o.PlanOutOpRandom?(e.args.salt||(e.args.salt=t),this._data[t]=e.execute(this)):this._data[t]=e):this.saltSeparator=e:this.experimentSalt=e:this._overrides=e:this._data=e}},{key:"get",value:function(t){return"_data"===t?this._data:"_overrides"===t?this._overrides:"experimentSalt"===t?this.experimentSalt:"saltSeparator"===t?this.saltSeparator:this._data[t]}},{key:"getParams",value:function(){return this._data}},{key:"del",value:function(t){delete this._data[t]}},{key:"toString",value:function(){return String(this._data)}},{key:"length",value:function(){return Object.keys(this._data).length}}]),s);function s(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),e=e||{},this.experimentSalt=t,this._overrides=(0,u.shallowCopy)(e),this._data=(0,u.shallowCopy)(e),this.saltSeparator="."}e.default=a,t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t};function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o,u=r(4),a=r(6),s=(o=a)&&o.__esModule?o:{default:o},f=r(5);function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var p=(h(g,u.PlanOutOpSimple),n(g,[{key:"compatHashCalculation",value:function(t){return parseInt(t.substr(0,13),16)}},{key:"compatZeroToOneCalculation",value:function(t){return this.getHash(t)/this.LONG_SCALE}},{key:"getUnit",value:function(t){var e=this.getArgMixed("unit");return(0,f.isArray)(e)||(e=[e]),t&&e.push(t),e}},{key:"getUniform",value:function(t,e,r){var n=arguments.length<=0||void 0===t?0:t,i=arguments.length<=1||void 0===e?1:e,o=r;return this.compatZeroToOneCalculation(o)*(i-n)+n}},{key:"getHash",value:function(t){var e;if(this.args.full_salt)e=this.getArgString("full_salt")+".";else{var r=this.getArgString("salt");e=this.mapper.get("experimentSalt")+"."+r+this.mapper.get("saltSeparator")}var n=e+this.getUnit(t).map(function(t){return String(t)}).join("."),i=(0,s.default)(n);return this.compatHashCalculation(i)}}]),g);function g(t){l(this,g);var e=c(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,t));return e.LONG_SCALE=0xfffffffffffff,e}function y(t){return h(e,t),n(e,[{key:"simpleExecute",value:function(){var t=this.getArgNumber("min"),e=this.getArgNumber("max");return this.getUniform(t,e)}}]),e;function e(){return l(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}}function v(t){return h(e,t),n(e,[{key:"compatRandomIntegerCalculation",value:function(t,e){return(this.getHash()+t)%(e-t+1)}},{key:"simpleExecute",value:function(){var t=this.getArgNumber("min"),e=this.getArgNumber("max");return this.compatRandomIntegerCalculation(t,e)}}]),e;function e(){return l(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}}function m(t){return h(e,t),n(e,[{key:"simpleExecute",value:function(){var t=this.getArgNumber("p");if(t<0||1<t)throw"Invalid probability";return this.getUniform(0,1)<=t?1:0}}]),e;function e(){return l(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}}function d(t){return h(e,t),n(e,[{key:"simpleExecute",value:function(){var t=this.getArgNumber("p"),e=this.getArgList("choices");if(t<0||1<t)throw"Invalid probability";if(0==e.length)return[];for(var r=[],n=0;n<e.length;n++){var i=e[n];this.getUniform(0,1,i)<=t&&r.push(i)}return r}}]),e;function e(){return l(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}}function _(t){return h(e,t),n(e,[{key:"compatRandomIndexCalculation",value:function(t){return this.getHash()%t.length}},{key:"simpleExecute",value:function(){var t=this.getArgList("choices");return 0===t.length?[]:t[this.compatRandomIndexCalculation(t)]}}]),e;function e(){return l(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}}function O(t){return h(e,t),n(e,[{key:"simpleExecute",value:function(){var n=this.getArgList("choices"),t=this.getArgList("weights");if(0===n.length)return[];var e=0,r=t.map(function(t){return e+=t}),i=this.getUniform(0,e);return(0,f.reduce)(r,function(t,e,r){return t||(i<=e?n[r]:t)},null)}}]),e;function e(){return l(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}}function b(t){return h(e,t),n(e,[{key:"compatSampleIndexCalculation",value:function(t){return this.getHash(t)%(t+1)}},{key:"compatAllowSampleStoppingPoint",value:function(){return!0}},{key:"sample",value:function(t,e){for(var r=t.length,n=r-e,i=this.compatAllowSampleStoppingPoint(),o=r-1;0<o;o--){var u=this.compatSampleIndexCalculation(o),a=t[o];if(t[o]=t[u],t[u]=a,i&&n===o)return t.slice(o,r)}return t.slice(0,e)}},{key:"simpleExecute",value:function(){var t=(0,f.shallowCopy)(this.getArgList("choices")),e=0;return e=void 0!==this.args.draws?this.getArgNumber("draws"):t.length,this.sample(t,e)}}]),e;function e(){return l(this,e),c(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}}e.default={PlanOutOpRandom:p,SampleBuilder:b,Sample:b(p),WeightedChoiceBuilder:O,WeightedChoice:O(p),UniformChoiceBuilder:_,UniformChoice:_(p),BernoulliFilterBuilder:d,BernoulliFilter:d(p),BernoulliTrialBuilder:m,BernoulliTrial:m(p),RandomIntegerBuilder:v,RandomInteger:v(p),RandomFloatBuilder:y,RandomFloat:y(p)},t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PlanOutOpUnary=e.PlanOutOpBinary=e.PlanOutOpCommutative=e.PlanOutOpSimple=e.PlanOutOp=void 0;var n=function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t};function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=r(5);function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var f=(n(l,[{key:"execute",value:function(t){throw"Implement the execute function"}},{key:"dumpArgs",value:function(){console.log(this.args)}},{key:"getArgMixed",value:function(t){if(void 0===this.args[t])throw"Missing argument "+t;return this.args[t]}},{key:"getArgNumber",value:function(t){var e=this.getArgMixed(t);if("number"!=typeof e)throw t+" is not a number.";return e}},{key:"getArgString",value:function(t){var e=this.getArgMixed(t);if("string"!=typeof e)throw t+" is not a string.";return e}},{key:"getArgList",value:function(t){var e=this.getArgMixed(t);if("[object Array]"!==Object.prototype.toString.call(e))throw t+" is not a list";return e}},{key:"getArgObject",value:function(t){var e=this.getArgMixed(t);if("[object Object]"!==Object.prototype.toString.call(e))throw t+" is not an object.";return e}},{key:"getArgIndexish",value:function(t){var e=this.getArgMixed(t),r=Object.prototype.toString.call(e);if("[object Object]"!==r&&"[object Array]"!==r)throw t+" is not an list or object.";return e}}]),l);function l(t){s(this,l),this.args=t}var c=(a(h,f),n(h,[{key:"execute",value:function(e){this.mapper=e;var r=this;return(0,o.forEach)(Object.keys(this.args),function(t){r.args[t]=e.evaluate(r.args[t])}),this.simpleExecute()}}]),h);function h(){return s(this,h),u(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}var p=(a(g,c),n(g,[{key:"simpleExecute",value:function(){return this.unaryExecute(this.getArgMixed("value"))}},{key:"getUnaryString",value:function(){return this.args.op}},{key:"unaryExecute",value:function(t){throw"implement unaryExecute"}}]),g);function g(){return s(this,g),u(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}var y=(a(v,c),n(v,[{key:"simpleExecute",value:function(){var t=this.getArgMixed("left"),e=this.getArgMixed("right");return this.binaryExecute(t,e)}},{key:"getInfixString",value:function(){return this.args.op}},{key:"binaryExecute",value:function(t,e){throw"implement binaryExecute"}}]),v);function v(){return s(this,v),u(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}var m=(a(d,c),n(d,[{key:"simpleExecute",value:function(){return this.commutativeExecute(this.getArgList("values"))}},{key:"getCommutativeString",value:function(){return this.args.op}},{key:"commutativeExecute",value:function(t){throw"implement commutativeExecute"}}]),d);function d(){return s(this,d),u(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}e.PlanOutOp=f,e.PlanOutOpSimple=c,e.PlanOutOpCommutative=m,e.PlanOutOpBinary=y,e.PlanOutOpUnary=p},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t){var e=void 0===t?"undefined":i(t);return"function"===e||"object"===e&&!!t}function r(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function f(t){return"function"==typeof t||!1}function l(t){if(!s(t))return[];if(Object.keys)return Object.keys(t);var e=[];for(var r in t)m(t,r)&&e.push(r);return d&&O(t,e),e}function n(s,f){return function(t){var e=arguments.length;if(e<2||null==t)return t;for(var r=1;r<e;r++)for(var n=arguments[r],i=s(n),o=i.length,u=0;u<o;u++){var a=i[u];f&&void 0!==t[a]||(t[a]=n[a])}return t}}function c(t){return t}function h(e){return e=u({},e),function(t){return function(t,e){var r=r(e),n=r.length;if(null==t)return!n;for(var i=Object(t),o=0;o<n;o++){var u=r[o];if(e[u]!==i[u]||!(u in i))return!1}return!0}(t,e)}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=n(function(t){if(!s(t))return[];var e=[];for(var r in t)e.push(r);return d&&O(t,e),e}),u=n(l),p=function(i,o,t){if(void 0===o)return i;switch(null==t?3:t){case 1:return function(t){return i.call(o,t)};case 2:return function(t,e){return i.call(o,t,e)};case 3:return function(t,e,r){return i.call(o,t,e,r)};case 4:return function(t,e,r,n){return i.call(o,t,e,r,n)}}return function(){return i.apply(o,arguments)}},g=function(e){return function(t){return null==t?void 0:t[e]}},a=Math.pow(2,53)-1,y=g("length"),v=function(t){var e=y(t);return"number"==typeof e&&0<=e&&e<=a},m=function(t,e){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)},d=!{toString:null}.propertyIsEnumerable("toString"),_=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function O(t,e){var r=_.length,n=t.constructor,i=f(n)&&n.prototype||Object.Prototype,o="constructor";for(m(t,o)&&!b(e,o)&&e.push(o);r--;)(o=_[r])in t&&t[o]!==i[o]&&!b(e,o)&&e.push(o)}var b=function(t,e,r,n){return v(t)||(t=E(t)),"number"==typeof r&&!n||(r=0),0<=t.indexOf(e)},E=function(t){for(var e=l(t),r=e.length,n=Array(r),i=0;i<r;i++)n[i]=t[e[i]];return n};e.default={deepCopy:function t(e){var r=e;if(e&&"object"===(void 0===e?"undefined":i(e)))for(var n in r="[object Array]"===Object.prototype.toString.call(e)?[]:{},e)r[n]=t(e[n]);return r},map:function(t,e,r){e=function(t,e,r){return null==t?c:f(t)?p(t,e,r):s(t)?h(t):g(t)}(e,r);for(var n=!v(t)&&l(t),i=(n||t).length,o=Array(i),u=0;u<i;u++){var a=n?n[u]:u;o[u]=e(t[a],a,t)}return o},reduce:function(t,e,r,n){e=p(e,n,4);var i=!v(t)&&l(t),o=(i||t).length,u=0;for(arguments.length<3&&(r=t[i?i[u]:u],u+=1);0<=u&&u<o;u++){var a=i?i[u]:u;r=e(r,t[a],a,t)}return r},getParameterByName:function(t){var e,r="undefined"!=typeof location,n="undefined"!=typeof window;if(r){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);e=null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))}else e="";return null!=e&&0!==e.length||!n||void 0===window.localStorage||null===window.localStorage?e:window.localStorage.getItem(t)},forEach:function(t,e,r){var n,i;if(e=p(e,r),v(t))for(n=0,i=t.length;n<i;n++)e(t[n],n,t);else{var o=l(t);for(n=0,i=o.length;n<i;n++)e(t[o[n]],o[n],t)}return t},isFunction:f,trimTrailingWhitespace:function(t){return t.replace(/^\s+|\s+$/g,"")},hasKey:function(t,e){return void 0!==t[e]},shallowCopy:function(t){return s(t)?r(t)?t.slice():o({},t):t},extend:o,isObject:s,isArray:r,range:function(t){for(var e=[],r=0;r<t;r++)e.push(r);return e}},t.exports=e.default},function(t,e,r){function n(t,e){var r=d.wordsToBytes(function(t){t.constructor==String?t=_.stringToBytes(t):void 0!==O&&"function"==typeof O.isBuffer&&O.isBuffer(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());var e=d.bytesToWords(t),r=8*t.length,n=[],i=1732584193,o=-271733879,u=-1732584194,a=271733878,s=-1009589776;e[r>>5]|=128<<24-r%32,e[15+(64+r>>>9<<4)]=r;for(var f=0;f<e.length;f+=16){for(var l=i,c=o,h=u,p=a,g=s,y=0;y<80;y++){if(y<16)n[y]=e[f+y];else{var v=n[y-3]^n[y-8]^n[y-14]^n[y-16];n[y]=v<<1|v>>>31}var m=(i<<5|i>>>27)+s+(n[y]>>>0)+(y<20?1518500249+(o&u|~o&a):y<40?1859775393+(o^u^a):y<60?(o&u|o&a|u&a)-1894007588:(o^u^a)-899497514);s=a,a=u,u=o<<30|o>>>2,o=i,i=m}i+=l,o+=c,u+=h,a+=p,s+=g}return[i,o,u,a,s]}(t));return e&&e.asBytes?r:e&&e.asString?i.bytesToString(r):d.bytesToHex(r)}var d,_,i;d=r(7),_=r(8).utf8,i=r(8).bin,n._blocksize=16,n._digestsize=20,t.exports=n},function(t,e){var o,r;o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&r.rotl(t,8)|4278255360&r.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=r.endian(t[e]);return t},randomBytes:function(t){for(var e=[];0<t;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],r=0,n=0;r<t.length;r++,n+=8)e[n>>>5]|=t[r]<<24-n%32;return e},wordsToBytes:function(t){for(var e=[],r=0;r<32*t.length;r+=8)e.push(t[r>>>5]>>>24-r%32&255);return e},bytesToHex:function(t){for(var e=[],r=0;r<t.length;r++)e.push((t[r]>>>4).toString(16)),e.push((15&t[r]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(parseInt(t.substr(r,2),16));return e},bytesToBase64:function(t){for(var e=[],r=0;r<t.length;r+=3)for(var n=t[r]<<16|t[r+1]<<8|t[r+2],i=0;i<4;i++)8*r+6*i<=8*t.length?e.push(o.charAt(n>>>6*(3-i)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],r=0,n=0;r<t.length;n=++r%4)0!=n&&e.push((o.indexOf(t.charAt(r-1))&Math.pow(2,-2*n+8)-1)<<2*n|o.indexOf(t.charAt(r))>>>6-2*n);return e}},t.exports=r},function(t,e){var r={utf8:{stringToBytes:function(t){return r.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(r.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e},bytesToString:function(t){for(var e=[],r=0;r<t.length;r++)e.push(String.fromCharCode(t[r]));return e.join("")}}};t.exports=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t};function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o,u=r(2),a=(o=u)&&o.__esModule?o:{default:o},s=r(10),f=r(5);var l=(n(c,[{key:"inExperiment",value:function(){return this._inExperiment}},{key:"setEnv",value:function(t){return this._env=(0,f.deepCopy)(t),this}},{key:"has",value:function(t){return this._env[t]}},{key:"get",value:function(t,e){var r=this._inputs[t];null==r&&(r=e);var n=this._env.get(t);return null!=n?n:r}},{key:"getParams",value:function(){if(!this._evaluated){try{this.evaluate(this._serialization)}catch(t){t instanceof s.StopPlanOutException&&(this._inExperiment=t.inExperiment)}this._evaluated=!0}return this._env.getParams()}},{key:"set",value:function(t,e){return this._env.set(t,e),this}},{key:"getSaltSeparator",value:function(){return this._env.saltSeparator}},{key:"setOverrides",value:function(t){return this._env.setOverrides(t),this}},{key:"getOverrides",value:function(){return this._env.getOverrides()}},{key:"hasOverride",value:function(t){var e=this.getOverrides();return e&&void 0!==e[t]}},{key:"registerCustomOperators",value:function(t){(0,s.registerOperators)(t)}},{key:"evaluate",value:function(t){if((0,f.isObject)(t)&&t.op)return(0,s.operatorInstance)(t).execute(this);if((0,f.isArray)(t)){var e=this;return(0,f.map)(t,function(t){return e.evaluate(t)})}return t}}]),c);function c(t){var e=arguments.length<=1||void 0===arguments[1]?"global_salt":arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n=arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this._serialization=t,this._env=n||new a.default(e),this.experimentSalt=this._experimentSalt=e,this._evaluated=!1,this._inExperiment=!1,this._inputs=(0,f.shallowCopy)(r)}e.default=l,t.exports=e.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.registerOperators=e.StopPlanOutException=e.operatorInstance=e.isOperator=e.initFactory=e.operators=void 0;var n=u(r(11)),i=u(r(3)),o=r(5);function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function a(){return{literal:n.Literal,get:n.Get,set:n.Set,seq:n.Seq,return:n.Return,index:n.Index,array:n.Arr,equals:n.Equals,and:n.And,or:n.Or,">":n.GreaterThan,"<":n.LessThan,">=":n.GreaterThanOrEqualTo,"<=":n.LessThanOrEqualTo,"%":n.Mod,"/":n.Divide,not:n.Not,round:n.Round,negative:n.Negative,min:n.Min,max:n.Max,length:n.Length,coalesce:n.Coalesce,map:n.Map,cond:n.Cond,product:n.Product,sum:n.Sum,randomFloat:i.RandomFloat,randomInteger:i.RandomInteger,bernoulliTrial:i.BernoulliTrial,bernoulliFilter:i.BernoulliFilter,uniformChoice:i.UniformChoice,weightedChoice:i.WeightedChoice,sample:i.Sample}}var s=a();e.operators=s,e.initFactory=a,e.isOperator=function(t){return(0,o.isObject)(t)&&t.op},e.operatorInstance=function(t){var e=t.op;if(!s[e])throw"Unknown Operator "+e;return new s[e](t)},e.StopPlanOutException=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.inExperiment=e},e.registerOperators=function(t){(0,o.forEach)(t,function(t,e){if(s[e])throw e+" already is defined";s[e]=t})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Return=e.Length=e.Max=e.Min=e.Negative=e.Not=e.Round=e.Divide=e.Mod=e.GreaterThanOrEqualTo=e.LessThanOrEqualTo=e.LessThan=e.GreaterThan=e.Equals=e.Sum=e.Product=e.Or=e.And=e.Cond=e.Index=e.Coalesce=e.Map=e.Arr=e.Set=e.Seq=e.Get=e.Literal=void 0;var n=function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t};function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=r(4),u=r(10),a=r(5);function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var c=(l(h,o.PlanOutOp),n(h,[{key:"execute",value:function(t){return this.getArgMixed("value")}}]),h);function h(){return s(this,h),f(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}var p=(l(g,o.PlanOutOp),n(g,[{key:"execute",value:function(t){return t.get(this.getArgString("var"))}}]),g);function g(){return s(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}var y=(l(v,o.PlanOutOp),n(v,[{key:"execute",value:function(e){(0,a.forEach)(this.getArgList("seq"),function(t){e.evaluate(t)})}}]),v);function v(){return s(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}var m=(l(d,o.PlanOutOp),n(d,[{key:"execute",value:function(t){var e=!1;throw t.evaluate(this.getArgMixed("value"))&&(e=!0),new u.StopPlanOutException(e)}}]),d);function d(){return s(this,d),f(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}var _=(l(O,o.PlanOutOp),n(O,[{key:"execute",value:function(t){var e=this.getArgString("var"),r=this.getArgMixed("value");t.hasOverride(e)||(r&&(0,u.isOperator)(r)&&!r.salt&&(r.salt=e),"experimentSalt"==e&&(t.experimentSalt=r),t.set(e,t.evaluate(r)))}}]),O);function O(){return s(this,O),f(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}var b=(l(E,o.PlanOutOp),n(E,[{key:"execute",value:function(e){return(0,a.map)(this.getArgList("values"),function(t){return e.evaluate(t)})}}]),E);function E(){return s(this,E),f(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}var w=(l(x,o.PlanOutOp),n(x,[{key:"execute",value:function(t){for(var e=this.getArgList("values"),r=0;r<e.length;r++){var n=e[r],i=t.evaluate(n);if(null!=i)return i}return null}}]),x);function x(){return s(this,x),f(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}var P=(l(A,o.PlanOutOpSimple),n(A,[{key:"simpleExecute",value:function(){var t=this.getArgIndexish("base"),e=this.getArgMixed("index");return"number"==typeof e?0<=e&&e<t.length?t[e]:void 0:t[e]}}]),A);function A(){return s(this,A),f(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}var k=(l(S,o.PlanOutOp),n(S,[{key:"execute",value:function(t){var e=this.getArgList("cond");for(var r in e){var n=e[r].if,i=e[r].then;if(t.evaluate(n))return t.evaluate(i)}return null}}]),S);function S(){return s(this,S),f(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}var T=(l(j,o.PlanOutOp),n(j,[{key:"execute",value:function(r){return(0,a.reduce)(this.getArgList("values"),function(t,e){return t?Boolean(r.evaluate(e)):t},!0)}}]),j);function j(){return s(this,j),f(this,(j.__proto__||Object.getPrototypeOf(j)).apply(this,arguments))}var L=(l(R,o.PlanOutOp),n(R,[{key:"execute",value:function(r){return(0,a.reduce)(this.getArgList("values"),function(t,e){return t||Boolean(r.evaluate(e))},!1)}}]),R);function R(){return s(this,R),f(this,(R.__proto__||Object.getPrototypeOf(R)).apply(this,arguments))}var M=(l(B,o.PlanOutOpCommutative),n(B,[{key:"commutativeExecute",value:function(t){return(0,a.reduce)(t,function(t,e){return t*e},1)}}]),B);function B(){return s(this,B),f(this,(B.__proto__||Object.getPrototypeOf(B)).apply(this,arguments))}var C=(l(I,o.PlanOutOpCommutative),n(I,[{key:"commutativeExecute",value:function(t){return(0,a.reduce)(t,function(t,e){return t+e},0)}}]),I);function I(){return s(this,I),f(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}var U=(l(N,o.PlanOutOpBinary),n(N,[{key:"getInfixString",value:function(){return"=="}},{key:"binaryExecute",value:function(t,e){return t===e}}]),N);function N(){return s(this,N),f(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}var D=(l(Y,o.PlanOutOpBinary),n(Y,[{key:"binaryExecute",value:function(t,e){return e<t}}]),Y);function Y(){return s(this,Y),f(this,(Y.__proto__||Object.getPrototypeOf(Y)).apply(this,arguments))}var q=(l(F,o.PlanOutOpBinary),n(F,[{key:"binaryExecute",value:function(t,e){return t<e}}]),F);function F(){return s(this,F),f(this,(F.__proto__||Object.getPrototypeOf(F)).apply(this,arguments))}var G=(l(z,o.PlanOutOpBinary),n(z,[{key:"binaryExecute",value:function(t,e){return t<=e}}]),z);function z(){return s(this,z),f(this,(z.__proto__||Object.getPrototypeOf(z)).apply(this,arguments))}var H=(l(K,o.PlanOutOpBinary),n(K,[{key:"binaryExecute",value:function(t,e){return e<=t}}]),K);function K(){return s(this,K),f(this,(K.__proto__||Object.getPrototypeOf(K)).apply(this,arguments))}var W=(l(Z,o.PlanOutOpBinary),n(Z,[{key:"binaryExecute",value:function(t,e){return t%e}}]),Z);function Z(){return s(this,Z),f(this,(Z.__proto__||Object.getPrototypeOf(Z)).apply(this,arguments))}var J=(l(V,o.PlanOutOpBinary),n(V,[{key:"binaryExecute",value:function(t,e){return parseFloat(t)/parseFloat(e)}}]),V);function V(){return s(this,V),f(this,(V.__proto__||Object.getPrototypeOf(V)).apply(this,arguments))}var X=(l(Q,o.PlanOutOpUnary),n(Q,[{key:"unaryExecute",value:function(t){return Math.round(t)}}]),Q);function Q(){return s(this,Q),f(this,(Q.__proto__||Object.getPrototypeOf(Q)).apply(this,arguments))}var $=(l(tt,o.PlanOutOpUnary),n(tt,[{key:"getUnaryString",value:function(){return"!"}},{key:"unaryExecute",value:function(t){return!t}}]),tt);function tt(){return s(this,tt),f(this,(tt.__proto__||Object.getPrototypeOf(tt)).apply(this,arguments))}var et=(l(rt,o.PlanOutOpUnary),n(rt,[{key:"getUnaryString",value:function(){return"-"}},{key:"unaryExecute",value:function(t){return 0-t}}]),rt);function rt(){return s(this,rt),f(this,(rt.__proto__||Object.getPrototypeOf(rt)).apply(this,arguments))}var nt=(l(it,o.PlanOutOpCommutative),n(it,[{key:"commutativeExecute",value:function(t){return Math.min.apply(null,t)}}]),it);function it(){return s(this,it),f(this,(it.__proto__||Object.getPrototypeOf(it)).apply(this,arguments))}var ot=(l(ut,o.PlanOutOpCommutative),n(ut,[{key:"commutativeExecute",value:function(t){return Math.max.apply(null,t)}}]),ut);function ut(){return s(this,ut),f(this,(ut.__proto__||Object.getPrototypeOf(ut)).apply(this,arguments))}var at=(l(st,o.PlanOutOpUnary),n(st,[{key:"unaryExecute",value:function(t){return t.length}}]),st);function st(){return s(this,st),f(this,(st.__proto__||Object.getPrototypeOf(st)).apply(this,arguments))}var ft=(l(lt,o.PlanOutOpSimple),n(lt,[{key:"simpleExecute",value:function(){var t=(0,a.deepCopy)(this.args);return delete t.op,delete t.salt,t}}]),lt);function lt(){return s(this,lt),f(this,(lt.__proto__||Object.getPrototypeOf(lt)).apply(this,arguments))}e.Literal=c,e.Get=p,e.Seq=y,e.Set=_,e.Arr=b,e.Map=ft,e.Coalesce=w,e.Index=P,e.Cond=k,e.And=T,e.Or=L,e.Product=M,e.Sum=C,e.Equals=U,e.GreaterThan=D,e.LessThan=q,e.LessThanOrEqualTo=G,e.GreaterThanOrEqualTo=H,e.Mod=W,e.Divide=J,e.Round=X,e.Not=$,e.Negative=et,e.Min=nt,e.Max=ot,e.Length=at,e.Return=m},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SimpleNamespace=e.Namespace=void 0;function u(t,e,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:u(i,e,r)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(r):void 0}var n=function(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t};function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=c(r(1)),s=c(r(2)),f=r(3),a=r(5),l=r(13);function c(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function g(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var y=(g(v,o.default),n(v,[{key:"configureLogger",value:function(){}},{key:"setup",value:function(){this.name="test_name"}},{key:"log",value:function(t){}},{key:"getParamNames",value:function(){return this.getDefaultParamNames()}},{key:"previouslyLogged",value:function(){return!0}},{key:"assign",value:function(t,e){}}]),v);function v(){return h(this,v),p(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}var m=(n(d,[{key:"addExperiment",value:function(t,e,r){throw"IMPLEMENT addExperiment"}},{key:"removeExperiment",value:function(t){throw"IMPLEMENT removeExperiment"}},{key:"setAutoExposureLogging",value:function(t){throw"IMPLEMENT setAutoExposureLogging"}},{key:"inExperiment",value:function(){throw"IMPLEMENT inExperiment"}},{key:"get",value:function(t,e){throw"IMPLEMENT get"}},{key:"logExposure",value:function(t){throw"IMPLEMENT logExposure"}},{key:"logEvent",value:function(t,e){throw"IMPLEMENT logEvent"}},{key:"requireExperiment",value:function(){this._experiment||this._assignExperiment()}},{key:"requireDefaultExperiment",value:function(){this._defaultExperiment||this._assignDefaultExperiment()}}]),d);function d(){h(this,d)}var _=(g(O,m),n(O,[{key:"setupDefaults",value:function(){}},{key:"setup",value:function(){throw"IMPLEMENT setup"}},{key:"setupExperiments",value:function(){throw"IMPLEMENT setupExperiments"}},{key:"getPrimaryUnit",value:function(){return this._primaryUnit}},{key:"allowedOverride",value:function(){return!1}},{key:"getOverrides",value:function(){return{}}},{key:"setPrimaryUnit",value:function(t){this._primaryUnit=t}},{key:"addExperiment",value:function(t,e,r){var n=this.availableSegments.length;if(n<r)return!1;if(void 0!==this.currentExperiments[t])return!1;var i=new s.default(this.name);i.set("sampled_segments",new f.Sample({choices:this.availableSegments,draws:r,unit:t}));for(var o=i.get("sampled_segments"),u=0;u<o.length;u++){this.segmentAllocations[o[u]]=t;var a=this.availableSegments.indexOf(o[u]);this.availableSegments[a]=this.availableSegments[n-1],this.availableSegments.splice(n-1,1),n-=1}this.currentExperiments[t]=e}},{key:"removeExperiment",value:function(e){var r=this;return void 0!==this.currentExperiments[e]&&((0,a.forEach)(Object.keys(this.segmentAllocations),function(t){r.segmentAllocations[t]===e&&(delete r.segmentAllocations[t],r.availableSegments.push(t))}),delete this.currentExperiments[e],!0)}},{key:"getSegment",value:function(){var t=new s.default(this.name),e=new f.RandomInteger({min:0,max:this.numSegments-1,unit:this.inputs[this.getPrimaryUnit()]});return t.set("segment",e),t.get("segment")}},{key:"_assignExperiment",value:function(){this.inputs=(0,a.extend)(this.inputs,(0,l.getExperimentInputs)(this.getName()));var t=this.getSegment();if(void 0!==this.segmentAllocations[t]){var e=this.segmentAllocations[t];this._assignExperimentObject(e)}}},{key:"_assignExperimentObject",value:function(t){var e=new this.currentExperiments[t](this.inputs);e.setName(this.getName()+"-"+t),e.setSalt(this.getName()+"-"+t),this._experiment=e,this._inExperiment=e.inExperiment(),this._inExperiment||this._assignDefaultExperiment()}},{key:"_assignDefaultExperiment",value:function(){this._defaultExperiment=new this.defaultExperimentClass(this.inputs)}},{key:"defaultGet",value:function(t,e){return u(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"requireDefaultExperiment",this).call(this),this._defaultExperiment.get(t,e)}},{key:"getName",value:function(){return this.name}},{key:"setName",value:function(t){this.name=t}},{key:"previouslyLogged",value:function(){return this._experiment?this._experiment.previouslyLogged():null}},{key:"inExperiment",value:function(){return u(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"requireExperiment",this).call(this),this._inExperiment}},{key:"setAutoExposureLogging",value:function(t){this._autoExposureLoggingSet=t,this._defaultExperiment&&this._defaultExperiment.setAutoExposureLogging(t),this._experiment&&this._experiment.setAutoExposureLogging(t)}},{key:"setGlobalOverride",value:function(t){var e=this.getOverrides();if(e&&(0,a.hasKey)(e,t)){var r=e[t];r&&(0,a.hasKey)(this.currentExperiments,r.experimentName)&&(this._assignExperimentObject(r.experimentName),this._experiment.addOverride(t,r.value))}}},{key:"setLocalOverride",value:function(t){var e=(0,a.getParameterByName)("experimentOverride");e&&(0,a.hasKey)(this.currentExperiments,e)&&(this._assignExperimentObject(e),(0,a.getParameterByName)(t)&&this._experiment.addOverride(t,(0,a.getParameterByName)(t)))}},{key:"getParams",value:function(t){return u(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"requireExperiment",this).call(this),this._experiment&&this.getOriginalExperimentName()===t?this._experiment.getParams():null}},{key:"getOriginalExperimentName",value:function(){return this._experiment?this._experiment.getName().split("-")[1]:null}},{key:"get",value:function(t,e){return u(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"requireExperiment",this).call(this),this.allowedOverride()&&this.setGlobalOverride(t),this.setLocalOverride(t),this._experiment?(void 0!==this._autoExposureLoggingSet&&this._experiment.setAutoExposureLogging(this._autoExposureLoggingSet),this._experiment.get(t,this.defaultGet(t,e))):this.defaultGet(t,e)}},{key:"logExposure",value:function(t){u(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"requireExperiment",this).call(this),this._experiment&&this._experiment.logExposure(t)}},{key:"logEvent",value:function(t,e){u(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"requireExperiment",this).call(this),this._experiment&&this._experiment.logEvent(t,e)}},{key:"getDefaultNamespaceName",value:function(){if((0,a.isObject)(this)&&this.constructor&&this!==this.window){var t=this.constructor.toString().match(/function\s*(\w+)/);if(t&&2===t.length)return t[1]}return"GenericNamespace"}}]),O);function O(t){h(this,O);var e=p(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,t));return e.name=e.getDefaultNamespaceName(),e.inputs=t||{},e.numSegments=1,e.segmentAllocations={},e.currentExperiments={},e._experiment=null,e._defaultExperiment=null,e.defaultExperimentClass=y,e._inExperiment=!1,e.setupDefaults(),e.setup(),e.availableSegments=(0,a.range)(e.numSegments),e.setupExperiments(),e}e.Namespace=m,e.SimpleNamespace=_},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function n(t){return t?a((0,i.shallowCopy)(t)):{}}var i=r(5),o={},u={},a=function(e){return(0,i.forEach)(Object.keys(e),function(t){(0,i.isFunction)(e[t])&&(e[t]=e[t]())}),e};e.default={registerExperimentInput:function(t,e,r){r?(u[r]||(u[r]={}),u[r][t]=e):o[t]=e},getExperimentInputs:function(t){var e=n(o);return t&&u[t]?(0,i.extend)(e,n(u[t])):e}},t.exports=e.default}],r.c=i,r.p="",r(0);function r(t){if(i[t])return i[t].exports;var e=i[t]={exports:{},id:t,loaded:!1};return n[t].call(e.exports,e,e.exports,r),e.loaded=!0,e.exports}var n,i},e.exports=t()}).call(this,r(1123).Buffer)},590:function(t,e){function r(){}r.prototype={on:function(t,e,r){var n=this.e||(this.e={});return(n[t]||(n[t]=[])).push({fn:e,ctx:r}),this},once:function(t,e,r){var n=this;function i(){n.off(t,i),e.apply(r,arguments)}return i._=e,this.on(t,i,r)},emit:function(t){for(var e=[].slice.call(arguments,1),r=((this.e||(this.e={}))[t]||[]).slice(),n=0,i=r.length;n<i;n++)r[n].fn.apply(r[n].ctx,e);return this},off:function(t,e){var r=this.e||(this.e={}),n=r[t],i=[];if(n&&e)for(var o=0,u=n.length;o<u;o++)n[o].fn!==e&&n[o].fn._!==e&&i.push(n[o]);return i.length?r[t]=i:delete r[t],this}},t.exports=r}}]);